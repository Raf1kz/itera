# ==============================================
# FlashStudy Environment Variables
# ==============================================
# Copy this file to .env.local (gitignored) and fill in your values
# NEVER commit .env or .env.local to git

# ==============================================
# Frontend (Vite) - Required
# ==============================================

# Supabase project URL (e.g., https://xxxxx.supabase.co)
VITE_SUPABASE_URL=https://YOUR_PROJECT_REF.supabase.co

# Supabase anonymous key (public, safe to expose in frontend)
VITE_SUPABASE_ANON_KEY=your_anon_key_here

# Supabase functions URL (e.g., https://xxxxx.functions.supabase.co)
VITE_SUPABASE_FUNCTION_URL=https://YOUR_PROJECT_REF.functions.supabase.co

# Clerk publishable key (e.g., pk_test_... or pk_live_...)
VITE_CLERK_PUBLISHABLE_KEY=pk_test_or_pk_live_key_here

# Comma-separated Clerk user IDs with admin access (e.g., user_xxx,user_yyy)
VITE_ADMIN_USER_IDS=

# ==============================================
# Backend (Supabase Edge Functions) - Required
# Set via: supabase secrets set KEY=value --project-ref YOUR_REF
# ==============================================

# OpenAI API key (required for flashcard generation)
# Get from: https://platform.openai.com/api-keys
# Set via: supabase secrets set OPENAI_API_KEY=sk-... --project-ref YOUR_REF
# OPENAI_API_KEY=sk-...

# Clerk issuer URL for JWT verification (required)
# Format: https://xxxxx.clerk.accounts.dev
# Find in: Clerk Dashboard → JWT Templates → Your template
# Set via: supabase secrets set CLERK_ISSUER=https://... --project-ref YOUR_REF
# CLERK_ISSUER=https://xxxxx.clerk.accounts.dev

# CORS allowed origin for production (required)
# Example: https://your-production-domain.com
# Set via: supabase secrets set ALLOWED_ORIGIN=https://... --project-ref YOUR_REF
# ALLOWED_ORIGIN=https://your-domain.com

# ==============================================
# Backend (Supabase Edge Functions) - Optional
# ==============================================

# OpenAI model (defaults to gpt-4o-mini if not set)
# Options: gpt-4o-mini, gpt-4o, gpt-4-turbo
# OPENAI_MODEL=gpt-4o-mini

# OpenAI embedding model (defaults to text-embedding-3-small if not set)
# OPENAI_EMBED_MODEL=text-embedding-3-small

# Web origin for CORS (defaults to * if not set - INSECURE)
# Set this to your frontend domain in production
# WEB_ORIGIN=https://your-domain.com

# ==============================================
# Development Setup Instructions
# ==============================================
# 1. Copy this file: cp .env.example .env.local
# 2. Fill in all VITE_* variables with your Supabase and Clerk credentials
# 3. Set backend secrets in Supabase:
#    supabase secrets set OPENAI_API_KEY=sk-... --project-ref YOUR_REF
#    supabase secrets set CLERK_ISSUER=https://... --project-ref YOUR_REF
#    supabase secrets set ALLOWED_ORIGIN=http://localhost:5173 --project-ref YOUR_REF
# 4. Restrict permissions: chmod 600 .env.local
# 5. Run: npm run dev

# ==============================================
# Production Deployment Checklist
# ==============================================
# Frontend (Vercel/Netlify):
# [ ] Set all VITE_* environment variables in deployment dashboard
# [ ] Use production Clerk keys (pk_live_...)
# [ ] Set VITE_ADMIN_USER_IDS to production admin user IDs
# [ ] Deploy and test

# Backend (Supabase):
# [ ] Rotate ALL secrets (OpenAI, Clerk) before deploying
# [ ] Set OPENAI_API_KEY in Supabase secrets
# [ ] Set CLERK_ISSUER to match production Clerk instance
# [ ] Set ALLOWED_ORIGIN to production domain (NO wildcard *)
# [ ] Deploy edge functions: supabase functions deploy generate-flashcards
# [ ] Test authentication and generation

# ==============================================
# Security Checklist
# ==============================================
# [ ] .env and .env.local are in .gitignore
# [ ] chmod 600 .env.local (restricted to owner only)
# [ ] All secrets rotated before production deployment
# [ ] Production secrets stored in deployment platform (Vercel/Netlify)
# [ ] Supabase secrets set via CLI, not in code
# [ ] CLERK_ISSUER matches your Clerk account
# [ ] ALLOWED_ORIGIN set to production domain only (no wildcard)
# [ ] No secrets hardcoded in source code
# [ ] OpenAI API key rotated quarterly (set calendar reminder)
